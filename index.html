<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>For You -- Sneha</title>
  <style>
    :root{--accent:#ff4da6}
    html,body{height:100%;margin:0}
    body{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:18px;min-height:100vh;font-family:Arial, Helvetica, sans-serif;background:transparent;padding:24px 0}
    .card{text-align:center;padding:0;max-width:820px;width:100%;background:transparent;border:0;box-shadow:none;border-radius:0;backdrop-filter:none;color:#333;font-family:'Playfair Display', Georgia, serif}
    h1{margin:0;color:#eaf4ff;font-family:'Playfair Display', Georgia, serif;font-weight:700;font-style:italic;letter-spacing:0.3px;text-shadow:0 0 14px rgba(143,211,255,0.35), 0 0 24px rgba(255,77,166,0.16)}
    p{margin-top:12px;color:#333;font-size:1.05rem}
    .note-section{max-width:820px;padding:20px 18px;text-align:center;background:rgba(255,77,166,0.03);border-radius:10px;color:#eaf4ff;font-size:1.05rem}
    .note-section p{color:inherit}
    .note-section .section-title{color:inherit}

    .sky-title{font-family:'Playfair Display', Georgia, serif;font-weight:700;letter-spacing:0.2px;font-size:clamp(0.78rem, 3.0vw, 1.25rem);line-height:1.25;color:#eaf4ff;text-shadow:0 0 14px rgba(143,211,255,0.35), 0 0 24px rgba(255,77,166,0.16);margin:4px 0 10px 0;white-space:nowrap;max-width:100%;overflow:hidden;text-overflow:ellipsis;display:block}
    @media (max-width:520px){
      .sky-title{white-space:normal;overflow:visible;text-overflow:clip;line-height:1.2}
    }

    /* Star map */
    .star-map{width:100%;max-width:820px;height:300px;border-radius:12px;background:linear-gradient(180deg,#071426 0%,#020617 100%);position:relative;overflow:hidden}
    .star-map svg{width:100%;height:100%;display:block}
    /* star visuals and accessible hit area */
    .star{cursor:pointer;transition:transform .15s ease;transform-origin:center}
    .star path{fill:#fff;opacity:0.98;transition:transform .15s ease;filter:drop-shadow(0 0 6px rgba(255,255,255,0.08));stroke:rgba(255,255,255,0.05);transform-origin:center}
    /* hover/focus: subtle glow only, no movement */
    .star:hover path, .star:focus path{filter:drop-shadow(0 0 10px rgba(255,255,255,0.12));}
    .star:focus-visible path{stroke:var(--accent);stroke-width:0.6;fill:#fff}
    .star-hit{fill:transparent;pointer-events:auto}
    .star[tabindex]{outline:none}

    /* sparkle animation — opacity & glow only (no movement/scale) */
    @keyframes sparkle { 0%,100%{opacity:1; filter:drop-shadow(0 0 6px rgba(255,255,255,0.12))} 50%{opacity:0.85; filter:drop-shadow(0 0 14px rgba(255,255,255,0.18))} }
    .star path.sparkle-path{animation:sparkle 1.6s ease-in-out infinite}
    @media (prefers-reduced-motion: reduce){ .star path.sparkle-path{animation:none!important} }

    /* Modal */
    .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);visibility:hidden;opacity:0;transition:opacity .2s ease}
    .modal.visible{visibility:visible;opacity:1}
    .modal-card{background:#fff;padding:20px;border-radius:12px;max-width:720px;box-shadow:0 10px 30px rgba(0,0,0,0.2);}
    .modal-card p{margin:0;color:#222}
    .modal-close{margin-top:12px;background:var(--accent);color:#fff;border:0;padding:8px 12px;border-radius:8px;cursor:pointer}

    /* small adjustments */
    .section-title{font-weight:600;margin:0 0 6px 0}
    .muted{color:#c6d0df;font-size:0.95rem}

    /* typed note styling */
    .typed-note .typed-text{white-space:pre-wrap;color:inherit;font-weight:700;font-style:italic}
    .typing .typed-text::after{content:'';display:inline-block;width:3px;height:1.1em;background:var(--accent);margin-left:6px;vertical-align:bottom;animation:blink 0.8s step-end infinite;border-radius:1px}
    
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Password gate (client-side deterrent; not true security) -->
  <div id="lockScreen" class="lock-screen" role="dialog" aria-modal="true" aria-labelledby="lockTitle">
    <div class="lock-card">
      <h2 id="lockTitle" class="lock-title">Enter Password</h2>
      <p class="lock-subtitle">This page is private.</p>
      <form id="lockForm" class="lock-form" autocomplete="off">
        <label class="lock-label" for="lockPassword">Password</label>
        <input id="lockPassword" class="lock-input" type="password" inputmode="text" autocomplete="off" required>
        <button class="lock-button" type="submit">Unlock</button>
        <p id="lockError" class="lock-error" aria-live="polite"></p>
      </form>
    </div>
  </div>

  <div id="appContent" class="app-content">
    <main class="card">
      <h1>Happy Birthday, Sneha!!</h1>
    </main>

    <section id="note" class="note-section">
      <p class="typed-note" aria-live="polite" data-full="Happy Birthday, Sneha. Today I celebrate you — your smile, your kindness, and the light you bring into the world. I’m sorry about hard times. I really miss the way we laughed together and I’ll be still there to make things right. May this year bring you the joy and love you so richly deserve."><span class="typed-text" aria-hidden="false"></span></p>
    </section>

    <section id="star-map-section">
      <h3 class="section-title sky-title">A little sky of our memories -- you can click on Stars & Moon</h3>
      <div class="star-map" id="starMap" aria-hidden="false">
        <svg viewBox="0 0 100 50" preserveAspectRatio="none" id="starSvg">
          <!-- decorative moon -->
          <defs>
            <radialGradient id="moonGlow" cx="82" cy="8" r="8" gradientUnits="userSpaceOnUse">
              <stop offset="0" stop-color="#d8ecff" stop-opacity="0.95" />
              <stop offset="1" stop-color="#d8ecff" stop-opacity="0" />
            </radialGradient>
          </defs>
          <g id="moon" class="moon" role="button" tabindex="0" aria-label="Open a moonlit message">
            <title>Moon note</title>
            <circle cx="82" cy="8" r="5" fill="#fff"></circle>
            <!-- crescent using overlapping dark circle to carve shape -->
            <circle cx="83.4" cy="7.4" r="4.6" fill="#071426"></circle>
            <!-- subtle glow -->
            <circle cx="82" cy="8" r="7" fill="url(#moonGlow)" opacity="0.9"></circle>
          </g>
          <!-- ring for hint/pulse (hidden by default) -->
          <circle class="moon-ring" cx="82" cy="8" r="8" fill="none" stroke="rgba(208,230,255,0.18)" stroke-width="0.8" opacity="0"></circle>
        </svg>
        <div class="moon-hint" id="moonHint" aria-hidden="true">Tap the moon</div>
        <p class="muted">Tap a star to read a memory.</p>
      </div>
    </section>

    <section id="gallery" aria-label="Photos" class="note-section">
      <h3 class="section-title">Photos</h3>
      <div class="gallery-grid" role="list">
        <button class="gallery-item" data-index="0" role="button" aria-label="Photo 1"><img src="assets/images/image1.jpg" alt="Photo 1"></button>
        <button class="gallery-item" data-index="1" role="button" aria-label="Photo 2"><img src="assets/images/image7.jpg" alt="Photo 2"></button>
        <button class="gallery-item" data-index="2" role="button" aria-label="Photo 3"><img src="assets/images/image2.jpg" alt="Photo 3"></button>
        <button class="gallery-item" data-index="3" role="button" aria-label="Photo 4"><img src="assets/images/image4.jpg" alt="Photo 4"></button>
        <button class="gallery-item" data-index="4" role="button" aria-label="Photo 5"><img src="assets/images/image5.jpg" alt="Photo 5"></button>
        <button class="gallery-item" data-index="5" role="button" aria-label="Photo 6"><img src="assets/images/image8.jpg" alt="Photo 6"></button>
        <button class="gallery-item" data-index="6" role="button" aria-label="Photo 7"><img src="assets/images/image3.jpg" alt="Photo 7"></button>
        <button class="gallery-item" data-index="7" role="button" aria-label="Photo 8"><img src="assets/images/image6.jpg" alt="Photo 8"></button>
      </div>
      <p class="muted">Tap a photo to view it larger.</p>
    </section>

    <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-card">
        <h4 id="modalTitle" class="section-title">Message</h4>
        <p id="modalContent">...</p>
        <button id="modalClose" class="modal-close">Close</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      // Password gate (client-side deterrent)
      // Change this password to anything you want.
      const ACCESS_PASSWORD = 'sneha123';
      const UNLOCK_KEY = 'birthday_surprise_unlocked_v1';

      const lockScreen = document.getElementById('lockScreen');
      const lockForm = document.getElementById('lockForm');
      const lockPassword = document.getElementById('lockPassword');
      const lockError = document.getElementById('lockError');
      const appContent = document.getElementById('appContent');

      function setLocked(isLocked){
        document.body.classList.toggle('locked', isLocked);
        if(appContent) appContent.style.display = isLocked ? 'none' : '';
        if(lockScreen) lockScreen.classList.toggle('visible', isLocked);
      }

      function unlock(){
        sessionStorage.setItem(UNLOCK_KEY, '1');
        setLocked(false);
        init();
      }

      function fail(msg){
        if(lockError) lockError.textContent = msg;
        if(lockPassword){
          lockPassword.value = '';
          lockPassword.focus();
        }
      }

      function initGate(){
        const alreadyUnlocked = sessionStorage.getItem(UNLOCK_KEY) === '1';
        if(alreadyUnlocked){
          setLocked(false);
          init();
          return;
        }
        setLocked(true);
        if(lockPassword) setTimeout(()=> lockPassword.focus(), 0);
        if(lockForm){
          lockForm.addEventListener('submit', (e)=>{
            e.preventDefault();
            const value = (lockPassword?.value || '').trim();
            if(!value) return fail('Enter the password.');
            if(value !== ACCESS_PASSWORD) return fail('Wrong password. Try again.');
            unlock();
          });
        }
      }

      // Main app logic (runs only after unlock)
      function init(){
      const messages = [
        "Hey!! Do you Remember March,20 when we walked together at Bandel station? Those moments really means a lot to me.",
        "April,17 at Howrah station, when you allowed me to hold your hand for first time ever, made me feel so special",
        "Hello beautiful — do you remember the day,Aug 21st,06:05 PM in the clock at Kalyani station , when we promised not to leave each other ever?",
        "I hope atleast you remember Dec,13",
        "I miss our late-night talk, laughter and your silly jokes. You just make the day better.",
        "I’m truly sorry for the hard times.I wish I could turn back time and make things right.", 
        "Every moment with you is a treasure I hold close to my heart.",
        "I really miss You a lot! It's already been 3 years and I am just trying to hold on to those memories we shared.",
        "As a final note, I want you to know that you are valued and cherished more than words can express. Wishing you a day filled with love, laughter, and all the things that bring you joy and makes you smile."
      ];


      // Star map setup: fixed positions for stars (non-dynamic) to keep layout consistent and tapping easier
      const svg = document.getElementById('starSvg');

      // fixed grid of positions (12 spots) — messages are mapped to these positions in order
      const fixedPositions = [
        [8,8],[22,10],[36,6],[50,12],[64,8],[78,18],
        [12,28],[30,36],[48,30],[66,38],[84,12],[90,28]
      ];
      const starPositions = [];
      for(let i=0;i<messages.length;i++){
        const base = fixedPositions[i % fixedPositions.length];
        const wrap = Math.floor(i / fixedPositions.length);
        const offsetX = wrap * 1.5; const offsetY = wrap * 1.5; // slight offset for overflow
        const x = Math.max(5, Math.min(95, base[0] + offsetX));
        const y = Math.max(6, Math.min(44, base[1] + offsetY));
        starPositions.push([x,y,i]);
      }

      // Constellation: connect a curated set of stars to form a subtle shape
      (function drawConstellation(){
        if(!svg || !starPositions.length) return;
        const ns = 'http://www.w3.org/2000/svg';
        // Connect in sequence (star 1 -> star 2 -> ...), based on the generated positions
        const constellationIndices = starPositions.map((_, idx) => idx);
        if(constellationIndices.length < 2) return;

        const g = document.createElementNS(ns, 'g');
        g.setAttribute('class', 'constellation');
        const poly = document.createElementNS(ns, 'polyline');
        poly.setAttribute('points', constellationIndices.map(i => `${starPositions[i][0]},${starPositions[i][1]}`).join(' '));
        g.appendChild(poly);

        // Place behind the moon (and behind dynamic stars)
        const moonEl = svg.querySelector('#moon');
        if(moonEl) svg.insertBefore(g, moonEl);
        else svg.insertBefore(g, svg.firstElementChild);
      })();

      // helper: returns a normalized 5-point star path centered at 0,0 with outer radius 1
      function normalizedStarPath(){
        const spikes = 5; const outer = 1; const inner = 0.45; let rot = Math.PI / 2 * 3; let path = '';
        path += `M ${0} ${-outer}`;
        const step = Math.PI / spikes;
        for(let i=0;i<spikes;i++){
          let x = Math.cos(rot) * outer; let y = Math.sin(rot) * outer; path += ` L ${x} ${y}`; rot += step;
          x = Math.cos(rot) * inner; y = Math.sin(rot) * inner; path += ` L ${x} ${y}`; rot += step;
        }
        path += ' Z';
        return path;
      }
      const normPath = normalizedStarPath();

      starPositions.forEach((s, i)=>{
        const cx = s[0]; const cy = s[1]; const mi = s[2];
        // modest size with limited variance so stars remain tappable and visible
        let size = 1.0 + (Math.random() * 0.25 - 0.12); // ~0.88 - 1.25
        if (cx < 12 || cx > 88 || cy < 8 || cy > 42) size = Math.min(size, 1.05);

        const g = document.createElementNS('http://www.w3.org/2000/svg','g');
        g.setAttribute('transform', `translate(${cx} ${cy}) scale(${size})`);
        g.classList.add('star');
        g.setAttribute('data-index', mi);
        g.setAttribute('tabindex', 0);
        g.setAttribute('role','button');
        g.setAttribute('aria-label', `Memory ${mi+1}`);

        const path = document.createElementNS('http://www.w3.org/2000/svg','path');
        path.setAttribute('d', normPath);
        path.setAttribute('fill', '#fff');
        path.setAttribute('stroke', 'none');

        // randomized sparkle for visual interest (respects reduced-motion via CSS)
        if(Math.random() < 0.9){
          path.classList.add('sparkle-path');
          path.style.animationDuration = `${1.2 + Math.random()*1.6}s`;
          path.style.animationDelay = `${Math.random()*1.2}s`;
        }

        g.appendChild(path);

        // larger invisible circle as a hit area for tapping/clicking (increased for easier touch)
        const hit = document.createElementNS('http://www.w3.org/2000/svg','circle');
        hit.setAttribute('r', 1.8); // larger hit radius in viewBox units
        hit.setAttribute('class', 'star-hit');
        g.appendChild(hit);

        // accessible title showing a short preview
        const title = document.createElementNS('http://www.w3.org/2000/svg','title');
        title.textContent = (messages[mi] || '').slice(0,80);
        g.appendChild(title);

        g.addEventListener('click', ()=> showMessage(mi));
        g.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); showMessage(mi); } });
        svg.appendChild(g);
      });

      // Modal
      const modal = document.getElementById('modal');
      const modalContent = document.getElementById('modalContent');
      const modalClose = document.getElementById('modalClose');
      function showMessage(index){
        modalContent.textContent = messages[index] || '';
        modal.classList.add('visible');
        modalClose.focus();
      }
      function closeModal(){ modal.classList.remove('visible'); }
      modalClose.addEventListener('click', closeModal);
      modal.addEventListener('click',(e)=>{ if(e.target===modal) closeModal(); });
      document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeModal(); });

      // Moon interactive note
      const moon = document.getElementById('moon');
      const moonMessage = `Now the hardest part - I don't know how much time I have to wait but I still choose to wait for you. As the final act of my love, I will be silently standing in your shadow, watching you grow and shine.`;
      if(moon){
        moon.addEventListener('click', showMoon);
        moon.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); showMoon(); } });
      }
      function showMoon(){
        const modalTitleEl = document.getElementById('modalTitle');
        modalTitleEl.textContent = 'A Moonlit Note';
        modalContent.textContent = moonMessage;
        modal.classList.add('visible');
        modalClose.focus();
        // hide the hint when the moon note opens
        hideHint();
      }

      // Moon hint behaviour
      const moonHint = document.getElementById('moonHint');
      const moonRing = document.querySelector('#starSvg .moon-ring');
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches || document.body.classList.contains('reduced-motion');
      let _moonHintTimer = null;
      function showHint(temporary = true){
        if(!moonHint) return;
        moonHint.setAttribute('aria-hidden','false');
        moonHint.classList.add('visible');
        if(moonRing && !prefersReduced) moonRing.classList.add('pulse');
        if(temporary && !prefersReduced){ clearTimeout(_moonHintTimer); _moonHintTimer = setTimeout(hideHint, 4200); }
      }
      function hideHint(){ if(!moonHint) return; moonHint.setAttribute('aria-hidden','true'); moonHint.classList.remove('visible'); if(moonRing) moonRing.classList.remove('pulse'); }

      // initial brief hint on load
      setTimeout(()=>{ showHint(true); }, 600);

      // show while hovering or focusing the moon, hide on blur/mouseleave
      if(moon){
        moon.addEventListener('mouseenter', ()=> showHint(false));
        moon.addEventListener('focus', ()=> showHint(false));
        moon.addEventListener('mouseleave', hideHint);
        moon.addEventListener('blur', hideHint);
        moon.addEventListener('click', ()=> hideHint());
      }

      // Typewriter for the note paragraph
      function typeNote(){
        const p = document.querySelector('.typed-note');
        if(!p) return;
        const full = p.dataset.full || '';
        const span = p.querySelector('.typed-text');
        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches || document.body.classList.contains('reduced-motion');
        if(prefersReduced){ span.textContent = full; return; }
        p.classList.add('typing');
        span.textContent = '';
        let i = 0; const speed = parseInt(p.dataset.speed, 10) || 60; // ms per character (default 60). override with data-speed
        const timer = setInterval(()=>{
          span.textContent += full.charAt(i);
          i++;
          if(i>=full.length){ clearInterval(timer); p.classList.remove('typing'); }
        }, speed);
      }
      // start typing shortly after load for a pleasant effect
      setTimeout(typeNote, 350);

      // Gallery lightbox behavior (click a photo to view it larger)
      const galleryItems = Array.from(document.querySelectorAll('.gallery-item'));
      if(galleryItems.length){
        const galleryImages = galleryItems.map(b => b.querySelector('img')?.src).filter(Boolean);
        let lightbox = null;
        let currentGalleryIndex = 0;

        function ensureLightbox(){
          if(lightbox) return;
          lightbox = document.createElement('div');
          lightbox.className = 'lightbox';
          lightbox.innerHTML = `
            <div class="lightbox-inner" role="dialog" aria-modal="true" aria-label="Image viewer">
              <button class="lightbox-close" aria-label="Close">✕</button>
              <button class="lightbox-prev" aria-label="Previous image">◀</button>
              <div class="lightbox-content"><img src="" alt=""></div>
              <button class="lightbox-next" aria-label="Next image">▶</button>
            </div>`;
          document.body.appendChild(lightbox);

          const closeBtn = lightbox.querySelector('.lightbox-close');
          const prevBtn = lightbox.querySelector('.lightbox-prev');
          const nextBtn = lightbox.querySelector('.lightbox-next');

          closeBtn.addEventListener('click', closeLightbox);
          prevBtn.addEventListener('click', ()=> showImage(currentGalleryIndex-1));
          nextBtn.addEventListener('click', ()=> showImage(currentGalleryIndex+1));

          lightbox.addEventListener('click',(e)=>{ if(e.target===lightbox) closeLightbox(); });
          document.addEventListener('keydown',(e)=>{
            if(!lightbox || !lightbox.classList.contains('visible')) return;
            if(e.key==='Escape') closeLightbox();
            else if(e.key==='ArrowLeft') showImage(currentGalleryIndex-1);
            else if(e.key==='ArrowRight') showImage(currentGalleryIndex+1);
          });
        }

        function openLightbox(index){
          ensureLightbox();
          currentGalleryIndex = index;
          showImage(index);
          lightbox.classList.add('visible');
          const closeBtn = lightbox.querySelector('.lightbox-close');
          if(closeBtn) closeBtn.focus();
        }

        function showImage(index){
          if(!lightbox) return;
          if(index < 0) index = galleryImages.length - 1;
          if(index >= galleryImages.length) index = 0;
          currentGalleryIndex = index;
          const img = lightbox.querySelector('.lightbox-content img');
          img.src = galleryImages[index];
          img.alt = 'Photo ' + (index+1);
        }

        function closeLightbox(){
          if(!lightbox) return;
          lightbox.classList.remove('visible');
          setTimeout(()=>{ const img = lightbox.querySelector('.lightbox-content img'); if(img) img.src=''; }, 250);
          const btn = galleryItems[currentGalleryIndex];
          if(btn) btn.focus();
        }

        galleryItems.forEach((btn, idx)=>{
          btn.addEventListener('click',()=> openLightbox(idx));
          btn.addEventListener('keydown',(e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); openLightbox(idx); } });
        });
      }

      } // end init()

      initGate();
    })();
  </script>

</body>
</html>
